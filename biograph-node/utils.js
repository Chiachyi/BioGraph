
exports.wikipediaCancer = {
	'breast cancer': 'Breast_cancer',
	'bronchioloalveolar carcinoma': 'Adenocarcinoma_in_situ_of_the_lung',
	'colon cancer': 'Colorectal_cancer',
	'esophageal squamous cell carcinoma': 'Esophageal_cancer',
	'hepatocellular carcinoma': 'Hepatocellular_carcinoma',
	'lung cancer': 'Lung_cancer',
	'nasopharyngeal carcinoma': 'Nasopharynx_cancer',
	'neuroblastoma': 'Neuroblastoma',
	'pancreatic ductal adenocarcinoma': 'Pancreatic_cancer',
	'acute lymphoblastic leukemia': 'Acute_lymphoblastic_leukemia',
	'gastric cancer': 'Stomach_cancer',
	'malignant melanoma': 'Melanoma',
	'renal clear cell carcinoma': 'Clear_cell_renal_cell_carcinoma',
	'acute myeloid leukemia': 'Acute_myeloid_leukemia',
	'acute promyelocytic leukemia': 'Acute_promyelocytic_leukemia',
	'non-small cell lung cancer': 'Non-small-cell_lung_carcinoma',
	'prostate cancer': 'Prostate_cancer',
	'head and neck squamous cell carcinoma': 'Head_and_neck_squamous-cell_carcinoma',
	'oral cancer': 'Oral_cancer',
	'renal cell carcinoma': 'Renal_cell_carcinoma',
	'papillary thyroid carcinoma': 'Papillary_thyroid_cancer',
	'ovarian cancer': 'Ovarian_cancer',
	'cervical carcinoma': 'Cervical_cancer',
	'chondrosarcoma': 'Chondrosarcoma',
	'colorectal cancer': 'Colorectal_cancer',
	'glioblastoma': 'Glioblastoma',
	'mesenchymal cancer': 'Sarcoma',
	'oral squamous cell carcinoma': 'Squamous_cell_carcinoma',
	'osteosarcoma': 'Osteosarcoma',
	'ovarian carcinoma': 'Ovarian_cancer',
	'cervical squamous cell carcinoma': 'Cervical_intraepithelial_neoplasia',
	'endometrial cancer': 'Endometrial_cancer',
	'glioma': 'Glioma',
	'laryngeal carcinoma': 'Laryngeal_cancer',
	'medulloblastoma': 'Medulloblastoma',
	'pituitary carcinoma': 'Pituitary_adenoma',
	'thyroid cancer': 'Thyroid_cancer',
	'prostate carcinoma': 'Prostate_cancer',
	'cervical cancer': 'Cervical_cancer',
	'chronic myelogenous leukemia': 'Chronic_myelogenous_leukemia',
	'pancreatic cancer': 'Pancreatic_cancer',
	'bladder cancer': 'Bladder_cancer',
	'esophageal cancer': 'Esophageal_cancer',
	'liver cancer': 'Liver_cancer',
	'malignant mesothelioma': 'Mesothelioma',
	'small cell lung cancer': 'Small-cell_carcinoma',
	'lung adenocarcinoma': 'Adenocarcinoma_of_the_lung',
	'pancreatic carcinoma': 'Pancreatic_cancer',
	'anaplastic astrocytoma': 'Anaplastic_astrocytoma',
	'multiple myeloma': 'Multiple_myeloma',
	'squamous carcinoma': 'Squamous_cell_carcinoma',
	'uveal melanoma': 'Uveal_melanoma',
	'colorectal carcinoma': 'Colorectal_cancer',
	'cholangiocarcinoma': 'Cholangiocarcinoma',
	'intrahepatic cholangiocarcinoma': 'Cholangiocarcinoma',
	'kidney cancer': 'Kidney_cancer',
	'primary cns lymphomas': 'Primary_central_nervous_system_lymphoma',
	'anaplastic thyroid carcinoma': 'Anaplastic_thyroid_cancer',
	'follicular thyroid carcinoma': 'Follicular_thyroid_cancer',
	'primary thyroid lymphoma': 'Thyroid_lymphoma',
	'chordoma': 'Chordoma',
	'gastrointestinal cancer': 'Gastrointestinal_cancer',
	'adult t-cell leukemia': 'Adult_T-cell_leukemia/lymphoma',
	'chronic lymphocytic leukemia': 'B-cell_chronic_lymphocytic_leukemia',
	'mantle cell lymphoma': 'Mantle_cell_lymphoma',
	'anaplastic large-cell lymphoma': 'Anaplastic_large-cell_lymphoma',
	'clear cell renal cell cancer': 'Clear_cell_renal_cell_carcinoma',
	'cutaneous t-cell lymphoma': 'Cutaneous_T_cell_lymphoma',
	'diffuse large B-cell lymphoma': 'Diffuse_large_B-cell_lymphoma',
	'gallbladder carcinoma': 'Gallbladder_cancer',
	'malt lymphoma': 'MALT_lymphoma',
	'rectal cancer': 'Colorectal_cancer',
	'tongue cancer': 'Oral_cancer',
	'b-cell lymphoma': 'B-cell_lymphoma',
	'breast carcinoma': 'Breast_cancer',
	'nasopharyngeal cancer': 'Nasopharynx_cancer',
	't-cell lymphoblastic lymphoma': 'T-lymphoblastic_leukemia/lymphoma',
	'colorectal adenocarcinoma': 'Colorectal_cancer',
	'gastric adenocarcinoma': 'Stomach_cancer',
	'medullary thyroid carcinoma': 'Medullary_thyroid_cancer',
	'retinoblastoma': 'Retinoblastoma',
	'colon carcinoma': 'Colorectal_cancer',
	'epithelial ovarian cance': 'Surface_epithelial-stromal_tumor',
	'adrenal cortical carcinoma': 'Adrenocortical_carcinoma',
	'uterine leiomyoma': 'Uterine_fibroid',
	'choriocarcinoma': 'Choriocarcinoma',
	'esophageal adenocarcinoma': 'Esophageal_cancer',
	'meningioma': 'Meningioma',
	'astrocytoma': 'Astrocytoma',
	'follicular lymphoma': 'Follicular_lymphoma',
	'laryngeal squamous cell carcinoma': 'Laryngeal_cancer',
	'head and neck cancer': 'Head_and_neck_cancer',
	'hypopharyngeal squamous cell carcinoma': 'Hypopharyngeal_cancer',
	'pancreatic adenocarcinoma': 'Pancreatic_cancer',
	't-cell lymphoma': 'T-cell_lymphoma',
	'gastrointestinal stromal tumor': 'Gastrointestinal_stromal_tumor',
	'thyroid carcinoma': 'Thyroid_neoplasm',
	'splenic marginal zone lymphoma': 'Splenic_marginal_zone_lymphoma',
	'laryngeal cancer': 'Laryngeal_cancer',
	'acute leukemia': 'Acute_leukemia',
	'monocytic leukemia': 'Monocytic_leukemia',
	'oral carcinoma': 'Oral_cancer',
	'primary gallbladder carcinoma': 'Gallbladder_cancer',
	'extrahepatic cholangiocarcinoma': 'Cholangiocarcinoma',
	'endometrial serous adenocarcinoma': 'Endometrial_cancer',
	'hepatoblastoma': 'Hepatoblastoma',
	'colonic adenocarcinoma': 'Adenocarcinoma'
};

exports.getNode = function(req, res, client, query) {
	res.setHeader("Access-Control-Allow-Origin", "*");
	if ("undefined"==typeof req.query.id) {
		// Handle errors 
		console.log('id is required');
		res.send('id is required');
	} else {
		var id = req.query.id;
		console.log("query: " + query);
		client.execute(query, { vid: id }, (err, results) => {
			if (!err) {
				var data = exports.mergeProperties(results[0]);
				
				var node = {
					group: "nodes",
					data: data
				}

				console.log(node);
				res.send(node);
			} else {
				res.send(err);
			}
		});
	}
};

exports.executeQuery = function(req, res, client, query) {
	res.setHeader("Access-Control-Allow-Origin", "*");
	if ("undefined"==typeof req.query.id) {
		// Handle errors 
		console.log('id is required');
		res.send('id is required');
	} else {
		var id = req.query.id;
		console.log("query: " + query);
		client.execute(query, { vid: id }, (err, results) => {
			if (!err) {
				console.log(results);
				res.send(results);
			} else {
				res.send(err);
			}
		});
	}
};

exports.mergeProperties = function(p) {
	var data = p;

	if("edge"==p.type) {
		//data.source = data.inV;
		//data.target = data.outV;
		data.source = data.outV;
		data.target = data.inV;
		
		delete data.inVLabel;
		delete data.outVLabel;
		delete data.inV;
		delete data.outV;
	}
	
	delete data.type;

	if("undefined"!=typeof p.properties) {
		var properties = p.properties,
			keys = Object.keys(p.properties),
			newprops = {};

		keys.forEach(function (key){
			newprops[key] = properties[key][0].value;
		});
		
		delete data.properties;
		
		Object.assign(data, newprops);
	}
	
	return data;
};